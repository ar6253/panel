<!-- profile.html -->
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>پروفایل کاربر</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
@font-face {font-family:'Yekan';src:url('https://cdn.fontcdn.ir/Font/Yekan/Yekan.woff2') format('woff2');}
body{background:#fff;font-family:'Vazirmatn',sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}
.container{background:#fff;padding:30px;border-radius:20px;box-shadow:0 4px 20px rgba(0,0,0,0.1);width:320px;text-align:center;position:relative;}
label{display:block;text-align:right;margin-bottom:6px;font-weight:600;}
input, select{width:100%;padding:10px;border:2px solid #ddd;border-radius:10px;margin-bottom:14px;text-align:center;font-family:'Yekan',sans-serif;font-size:14px;}
button{width:100%;padding:10px 15px;border:none;border-radius:10px;font-family:'Vazirmatn',sans-serif;font-size:16px;color:#fff;background:#5b5fc7;cursor:pointer;}
button:hover{background:#4a4ebd;}
.back-button{position:absolute;top:12px;left:12px;background:#ccc;color:#333;padding:6px 10px;border:none;border-radius:8px;cursor:pointer;font-size:13px;}
</style>
</head>
<body>
<div class="container">
<button class="back-button" onclick="history.back()">بازگشت</button>
<h2>پروفایل کاربر</h2>

<label>نام</label>
<input type="text" id="name" placeholder="نام">

<label>ایمیل</label>
<input type="email" id="email" placeholder="ایمیل">

<label>نسخه</label>
<input type="text" id="version" placeholder="نسخه بازی">

<label>ادیشن</label>
<select id="edition">
  <option value="">انتخاب کنید</option>
  <option value="Bedrock">Bedrock</option>
  <option value="Java">Java</option>
</select>

<button onclick="saveData()">ذخیره</button>
</div>

<script>
function getUsername() {
  const params = new URLSearchParams(window.location.search);
  return params.get('user') || '';
}

function saveData() {
  const username = getUsername();
  if(!username || username.toLowerCase() === 'alireza') {
    alert('این یوزر ذخیره نمی‌شود!');
    return;
  }

  const data = {
    username: username,
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    version: document.getElementById('version').value,
    edition: document.getElementById('edition').value
  };

  fetch('save_excel.php', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(data)
  })
  .then(res=>res.json())
  .then(resp=>{
    if(resp.ok) alert('ذخیره شد!');
    else alert('خطا: '+resp.error);
  })
  .catch(e=>alert('خطا: '+e));
}
</script>
</body>
</html>
