<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>پروفایل کاربر</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
@font-face {
  font-family: 'Yekan';
  src: url('https://cdn.fontcdn.ir/Font/Yekan/Yekan.woff2') format('woff2');
}
body {
  margin: 0;
  background: #fff;
  font-family: 'Vazirmatn', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
.container {
  width: 90%;
  max-width: 380px;
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.1);
  padding: 30px 25px;
  text-align: center;
  position: relative;
}
.back-button {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #ccc;
  color: #333;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  padding: 6px 10px;
  cursor: pointer;
  transition: background 0.2s;
}
.back-button:hover { background: #bbb; }

h2 {
  margin-bottom: 25px;
  font-weight: 600;
  color: #222;
}

label {
  display: block;
  text-align: right;
  margin-bottom: 6px;
  font-weight: 600;
  font-size: 14px;
}

input, select {
  width: 100%;
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 10px;
  margin-bottom: 15px;
  text-align: center;
  font-family: 'Yekan', sans-serif;
  font-size: 14px;
  outline: none;
  transition: 0.2s;
}
input:focus, select:focus {
  border-color: #5b5fc7;
  box-shadow: 0 0 3px rgba(91,95,199,0.3);
}

button.save {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-family: 'Vazirmatn', sans-serif;
  background: #4285f4;
  color: #fff;
  cursor: pointer;
  transition: background 0.2s;
}
button.save:hover {
  background: #357ae8;
}
</style>
</head>
<body>
<div class="container">
  <button class="back-button" onclick="history.back()">بازگشت</button>
  <h2>پروفایل کاربر</h2>

  <label>نام</label>
  <input type="text" id="name" placeholder="نام">

  <label>ایمیل</label>
  <input type="email" id="email" placeholder="ایمیل">

  <label>نسخه</label>
  <input type="text" id="version" placeholder="نسخه بازی">

  <label>ادیشن</label>
  <select id="edition">
    <option value="">انتخاب کنید</option>
    <option value="Bedrock">Bedrock</option>
    <option value="Java">Java</option>
  </select>

  <button class="save" onclick="saveData()">ذخیره</button>
</div>

<script>
function getUsername() {
  const params = new URLSearchParams(window.location.search);
  return params.get('user') || '';
}

function saveData() {
  const username = getUsername();
  if (!username || username.toLowerCase() === 'alireza') {
    alert('این یوزر ذخیره نمی‌شود!');
    return;
  }

  const data = {
    username: username,
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    version: document.getElementById('version').value,
    edition: document.getElementById('edition').value
  };

  fetch('save_excel.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(resp => {
    if (resp.ok) alert('✅ ذخیره شد!');
    else alert('⚠️ خطا: ' + resp.error);
  })
  .catch(e => alert('⚠️ خطا در ارتباط با سرور'));
}
</script>
</body>
</html>
